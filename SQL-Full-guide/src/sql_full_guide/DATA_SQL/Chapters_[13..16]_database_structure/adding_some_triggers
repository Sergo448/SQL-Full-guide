-- EXAMPLE
-- CREATE TRIGGER update_customer_address UPDATE OF address ON customers 
-- CREATE TEMP TRIGGER ex1 AFTER INSERT ON main.tab1 BEGIN ...

--CREATE TRIGGER NEWORDER
--	AFTER INSERT ON ORDERS
--	BEGIN
--	    UPDATE SALESREPS
--			SET SALES = SALES + INSERTED.AMOUNT
--			FROM SALESREPS, INSERTED
--			WHERE SALESREPS.EMPL_NUM = INSERTED.REP;
--	    UPDATE PRODUCTS
--			SET QTY_ON_HAND = QTY_ON_HAND - INSERTED.QTY
--			FROM PRODUCTS, INSERTED
--			WHERE PRODUCTS.MFR_ID = INSERTED.MFR
--			AND PRODUCTS.PRODUCT_ID = INSERTED.PRODUCT;
--	END;

-- CORRECT FOR SQL server!
--CREATE TRIGGER REP_UPDATE 
--	AFTER INSERT ON SALESREPS 
--	FOR INSERT, UPDATE
--	AS IF ((SELECT COUNT(*) FROM OFFICES, INSERTED 
--							WHERE OFFICES.OFFICE = INSERTED.REP_OFFICE) = 0)
--		BEGIN
--			printf "Указан неверный идентификатор офиса."
--			ROLLBACK TRANSACTION
--		END;
		
-- !CORRECT!
CREATE TRIGGER CHANGE_REP_OFFICE UPDATE of OFFICE ON OFFICES
-- part for SQL server, not to sqlitebrowser
--	ON OFFICES
--	FOR UPDATE
--	AS IF UPDATE(OFFICE)
		BEGIN
			UPDATE SALESREPS
				SET REP_OFFICE = INSERTED.OFFICE
				 FROM SALESREPS, INSERTED, DELETED
				 WHERE SALESREPS.REP_OFFICE = DELETED.OFFICE;
		END;
		
		
